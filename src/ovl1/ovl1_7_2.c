#include <ultra64.h>
#include <macros.h>
#include "ovl1_6.h"
#include "D_8004A7C4.h"
#include "unk_structs/D_800DE350.h"

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void *func_800B2340(void *arg0, struct UnkStruct8004A7C4_3C *arg1, u32 arg2) {
    ? spB8;
    ? sp78;
    f32 temp_f0;
    f32 temp_f0_2;
    f32 temp_f0_3;
    f32 temp_f0_4;
    f32 temp_f0_5;
    f32 temp_f0_6;
    f32 temp_f12;
    f32 temp_f12_2;
    f32 temp_f12_3;
    f32 temp_f2;
    f32 temp_f2_2;
    f32 temp_f2_3;
    struct UnkStruct8004A7C4_3C *temp_s0;
    u32 phi_a2;
    struct UnkStruct8004A7C4_3C *phi_s0;

    phi_a2 = arg2;
    if (arg2 == 0xFFFF) {
        phi_a2 = D_8004A7C4->objId;
    }
    phi_s0 = arg1;
    if (arg1 == 0) {
        phi_s0 = D_8004A7C4->unk3C;
    }
    arg2 = phi_a2;
    guMtxIdentF_ovl1(&spB8, phi_a2);
loop_5:
    if (phi_s0->unk14 != 1) {
        temp_f0 = phi_s0->unk40.x;
        if ((temp_f0 != 1.0f) || (phi_s0->unk40.y != 1.0f) || (phi_s0->unk40.z != 1.0f)) {
            func_8001B4AC_ovl1(&sp78, temp_f0, (bitwise s32) phi_s0->unk40.y, (bitwise s32) phi_s0->unk40.z);
            guMtxCatF(&spB8, &sp78, &spB8);
        }
        temp_f0_2 = phi_s0->unk30.x;
        if ((temp_f0_2 != 0.0f) || (phi_s0->unk30.y != 0.0f) || (phi_s0->unk30.z != 0.0f)) {
            _guRotateRPYF(&sp78, temp_f0_2, (bitwise f32) (bitwise s32) phi_s0->unk30.y, (bitwise f32) (bitwise s32) phi_s0->unk30.z);
            guMtxCatF(&spB8, &sp78, &spB8);
        }
        temp_f0_3 = phi_s0->unk1C.x;
        if ((temp_f0_3 != 0.0f) || (phi_s0->unk1C.y != 0.0f) || (phi_s0->unk1C.z != 0.0f)) {
            func_8001B6E4_ovl1(&sp78, temp_f0_3, (bitwise s32) phi_s0->unk1C.y, (bitwise s32) phi_s0->unk1C.z);
            guMtxCatF(&spB8, &sp78, &spB8);
        }
    } else {
        temp_f0_4 = gEntitiesScaleXArray[arg2];
        temp_f2 = gEntitiesScaleYArray[arg2];
        temp_f12 = gEntitiesScaleZArray[arg2];
        if ((temp_f0_4 != 1.0f) || (temp_f2 != 1.0f) || (temp_f12 != 1.0f)) {
            func_8001B4AC_ovl1(temp_f12, &sp78, temp_f0_4, temp_f2, temp_f12);
            guMtxCatF(&spB8, &sp78, &spB8);
        }
        temp_f0_5 = gEntitiesAngleXArray[arg2];
        temp_f2_2 = gEntitiesAngleYArray[arg2];
        temp_f12_2 = gEntitiesAngleZArray[arg2];
        if ((temp_f0_5 != 0.0f) || (temp_f2_2 != 0.0f) || (temp_f12_2 != 0.0f)) {
            _guRotateRPYF(&sp78, temp_f0_5, temp_f2_2, temp_f12_2);
            guMtxCatF(&spB8, &sp78, &spB8);
        }
        temp_f0_6 = gEntitiesNextPosXArray[arg2];
        temp_f2_3 = gEntitiesNextPosYArray[arg2];
        temp_f12_3 = gEntitiesNextPosZArray[arg2];
        if ((temp_f0_6 != 0.0f) || (temp_f2_3 != 0.0f) || (temp_f12_3 != 0.0f)) {
            func_8001B6E4_ovl1(temp_f12_3, &sp78, temp_f0_6, temp_f2_3, temp_f12_3);
            guMtxCatF(&spB8, &sp78, &spB8);
        }
    }
    temp_s0 = phi_s0->unk14;
    phi_s0 = temp_s0;
    if (temp_s0 != 1) {
        goto loop_5;
    }
    arg0->unk0 = spE8;
    arg0->unk4 = spEC;
    arg0->unk8 = spF0;
    return arg0;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B2340.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void func_800B26D8(void *arg0, struct UnkStruct8004A7C4_3C *arg1, u32 arg2) {
    f32 sp90;
    ? sp50;
    f32 temp_f0;
    f32 temp_f0_2;
    f32 temp_f0_3;
    f32 temp_f12;
    f32 temp_f2;
    f32 temp_f2_2;
    s32 temp_cond;
    struct UnkStruct8004A7C4_3C *phi_s0;
    u32 phi_s5;

    phi_s5 = arg2;
    if (arg2 == 0xFFFF) {
        phi_s5 = D_8004A7C4->objId;
    }
    phi_s0 = arg1;
    if (arg1 == 0) {
        phi_s0 = D_8004A7C4->unk3C;
    }
    guMtxIdentF_ovl1(&sp90);
loop_5:
    if (phi_s0->unk14 != 1) {
        temp_f0 = phi_s0->unk30.x;
        if ((temp_f0 != 0.0f) || (phi_s0->unk30.y != 0.0f) || (phi_s0->unk30.z != 0.0f)) {
            _guRotateRPYF(&sp50, temp_f0, (bitwise f32) (bitwise s32) phi_s0->unk30.y, (bitwise f32) (bitwise s32) phi_s0->unk30.z);
            guMtxCatF(&sp90, &sp50, &sp90);
block_14:
        }
    } else {
        temp_f0_2 = gEntitiesAngleXArray[phi_s5];
        temp_f2 = gEntitiesAngleYArray[phi_s5];
        temp_f12 = gEntitiesAngleZArray[phi_s5];
        if ((temp_f0_2 != 0.0f) || (temp_f2 != 0.0f) || (temp_f12 != 0.0f)) {
            _guRotateRPYF(&sp50, temp_f0_2, temp_f2, temp_f12);
            guMtxCatF(&sp90, &sp50, &sp90);
            goto block_14;
        }
    }
    phi_s0 = phi_s0->unk14;
    if (phi_s0->unk14 != 1) {
        goto loop_5;
    }
    temp_f0_3 = asinf(-sp98);
    temp_f2_2 = D_800D67D4;
    temp_cond = temp_f0_3 == temp_f2_2;
    arg0->unk4 = temp_f0_3;
    if (temp_cond || (D_800D67D8 == arg0->unk4)) {
        if (temp_f2_2 == arg0->unk4) {
            arg0->unk0 = atan2f(spA0, spA4);
        } else {
            arg0->unk0 = atan2f(-spA0, spA4);
        }
        arg0->unk8 = 0.0f;
    } else {
        arg0->unk0 = atan2f(spA8, spB8);
        arg0->unk8 = atan2f(sp94, sp90);
    }
    func_800A4598(arg0);
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B26D8.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void *func_800B2928(void *arg0, struct UnkStruct8004A7C4_3C *arg1, u32 arg2) {
    f32 sp90;
    ? sp50;
    f32 temp_f0;
    f32 temp_f0_2;
    f32 temp_f12;
    f32 temp_f2;
    struct UnkStruct8004A7C4_3C *phi_s0;
    u32 phi_s5;

    phi_s5 = arg2;
    if (arg2 == 0xFFFF) {
        phi_s5 = D_8004A7C4->objId;
    }
    phi_s0 = arg1;
    if (arg1 == 0) {
        phi_s0 = D_8004A7C4->unk3C;
    }
    guMtxIdentF_ovl1(&sp90);
loop_5:
    if (phi_s0->unk14 != 1) {
        temp_f0 = phi_s0->unk40.x;
        if ((temp_f0 != 1.0f) || (phi_s0->unk40.y != 1.0f) || (phi_s0->unk40.z != 1.0f)) {
            func_8001B4AC_ovl1(&sp50, temp_f0, (bitwise s32) phi_s0->unk40.y, (bitwise s32) phi_s0->unk40.z);
            guMtxCatF(&sp90, &sp50, &sp90);
block_14:
        }
    } else {
        temp_f0_2 = gEntitiesScaleXArray[phi_s5];
        temp_f2 = gEntitiesScaleYArray[phi_s5];
        temp_f12 = gEntitiesScaleZArray[phi_s5];
        if ((temp_f0_2 != 1.0f) || (temp_f2 != 1.0f) || (temp_f12 != 1.0f)) {
            func_8001B4AC_ovl1(temp_f12, &sp50, temp_f0_2, temp_f2, temp_f12);
            guMtxCatF(&sp90, &sp50, &sp90);
            goto block_14;
        }
    }
    phi_s0 = phi_s0->unk14;
    if (phi_s0->unk14 != 1) {
        goto loop_5;
    }
    arg0->unk0 = sp90;
    arg0->unk4 = spA4;
    arg0->unk8 = spB8;
    return arg0;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B2928.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
f32 func_800B2AD4(void *arg0, struct UnkStruct8004A7C4_3C *arg1, u32 arg2) {
    f32 spBC;
    ? sp7C;
    f32 temp_f0;
    f32 temp_f0_2;
    f32 temp_f0_3;
    f32 temp_f0_4;
    f32 temp_f0_5;
    f32 temp_f0_6;
    f32 temp_f0_7;
    f32 temp_f12;
    f32 temp_f12_2;
    f32 temp_f12_3;
    f32 temp_f12_4;
    f32 temp_f2;
    f32 temp_f2_2;
    f32 temp_f2_3;
    f32 temp_f2_4;
    struct UnkStruct8004A7C4_3C *temp_s0;
    u32 phi_a2;
    struct UnkStruct8004A7C4_3C *phi_s0;

    phi_a2 = arg2;
    if (arg2 == 0xFFFF) {
        phi_a2 = D_8004A7C4->objId;
    }
    phi_s0 = arg1;
    if (arg1 == 0) {
        phi_s0 = D_8004A7C4->unk3C;
    }
    arg2 = phi_a2;
    guMtxIdentF_ovl1(&spBC, phi_a2);
loop_5:
    if (phi_s0->unk14 != 1) {
        temp_f0_2 = phi_s0->unk40.x;
        if ((temp_f0_2 != 1.0f) || (phi_s0->unk40.y != 1.0f) || (phi_s0->unk40.z != 1.0f)) {
            func_8001B4AC_ovl1(&sp7C, 1.0f / temp_f0_2, 1.0f / phi_s0->unk40.y, 1.0f / phi_s0->unk40.z);
            guMtxCatF(&sp7C, &spBC, &spBC);
        }
        temp_f0_3 = phi_s0->unk30.x;
        if ((temp_f0_3 != 0.0f) || (phi_s0->unk30.y != 0.0f) || (phi_s0->unk30.z != 0.0f)) {
            func_800A465C(&sp7C, -temp_f0_3, -phi_s0->unk30.y, -phi_s0->unk30.z);
            guMtxCatF(&sp7C, &spBC, &spBC);
        }
        temp_f0_4 = phi_s0->unk1C.x;
        if ((temp_f0_4 != 0.0f) || (phi_s0->unk1C.y != 0.0f) || (phi_s0->unk1C.z != 0.0f)) {
            func_8001B6E4_ovl1(&sp7C, -temp_f0_4, -phi_s0->unk1C.y, -phi_s0->unk1C.z);
            guMtxCatF(&sp7C, &spBC, &spBC);
        }
    } else {
        temp_f0_5 = gEntitiesScaleXArray[arg2];
        temp_f2 = gEntitiesScaleYArray[arg2];
        temp_f12 = gEntitiesScaleZArray[arg2];
        if ((temp_f0_5 != 1.0f) || (temp_f2 != 1.0f) || (temp_f12 != 1.0f)) {
            func_8001B4AC_ovl1(temp_f12, &sp7C, 1.0f / temp_f0_5, 1.0f / temp_f2, 1.0f / temp_f12);
            guMtxCatF(&sp7C, &spBC, &spBC);
        }
        temp_f0_6 = gEntitiesAngleXArray[arg2];
        temp_f2_2 = gEntitiesAngleYArray[arg2];
        temp_f12_2 = gEntitiesAngleZArray[arg2];
        if ((temp_f0_6 != 0.0f) || (temp_f2_2 != 0.0f) || (temp_f12_2 != 0.0f)) {
            func_800A465C(temp_f12_2, &sp7C, -temp_f0_6, -temp_f2_2, -temp_f12_2);
            guMtxCatF(&sp7C, &spBC, &spBC);
        }
        temp_f0_7 = gEntitiesNextPosXArray[arg2];
        temp_f2_3 = gEntitiesNextPosYArray[arg2];
        temp_f12_3 = gEntitiesNextPosZArray[arg2];
        if ((temp_f0_7 != 0.0f) || (temp_f2_3 != 0.0f) || (temp_f12_3 != 0.0f)) {
            func_8001B6E4_ovl1(temp_f12_3, &sp7C, -temp_f0_7, -temp_f2_3, -temp_f12_3);
            guMtxCatF(&sp7C, &spBC, &spBC);
        }
    }
    temp_s0 = phi_s0->unk14;
    phi_s0 = temp_s0;
    if (temp_s0 != 1) {
        goto loop_5;
    }
    temp_f0 = arg0->unk0;
    temp_f2_4 = arg0->unk4;
    temp_f12_4 = arg0->unk8;
    arg0->unk0 = spEC + ((spBC * temp_f0) + (spCC * temp_f2_4) + (spDC * temp_f12_4));
    arg0->unk4 = spF0 + ((spC0 * temp_f0) + (spD0 * temp_f2_4) + (spE0 * temp_f12_4));
    arg0->unk8 = spF4 + ((spC4 * temp_f0) + (spD4 * temp_f2_4) + (spE4 * temp_f12_4));
    return temp_f0;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B2AD4.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void func_800B2F54(s32 arg0, ? arg2) {
    func_8000FE2C_ovl1(arg2, *(&D_800D79D8 + (((arg0 - 0xA) >> 1) * 4)), arg2);
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B2F54.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void func_800B2F90(s32 arg0, ? arg2) {
    void *temp_s0;

    temp_s0 = *(&D_800D79D8 + (((arg0 - 0xA) >> 1) * 4));
    func_8000FE2C_ovl1(arg2, temp_s0, arg2);
loop_1:
    if (D_800D67DC != temp_s0->unk74) {
        finish_current_thread(1);
        goto loop_1;
    }
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B2F90.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void func_800B3008(s32 arg0) {
loop_1:
    if (D_800D67E0 != (*(&D_800D79D8 + (((arg0 - 0xA) >> 1) * 4)))->unk74) {
        finish_current_thread(1);
        goto loop_1;
    }
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B3008.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void *func_800B3070(s32 arg0, f32 arg1) {
    void *temp_v0;

    temp_v0 = *(&D_800D79D8 + (((arg0 - 0xA) >> 1) * 4));
    temp_v0->unk78 = arg1;
    return temp_v0;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B3070.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void *func_800B3094(s32 arg0) {
    void *temp_v0;

    temp_v0 = *(&D_800D79D8 + (((arg0 - 0xA) >> 1) * 4));
    temp_v0->unk74 = D_800D67E4;
    return temp_v0;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B3094.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
s32 func_800B30BC(f32 arg0, f32 arg1, ? arg2) {
    f32 temp_f0;
    f32 temp_f0_2;
    struct Normal *temp_v1;
    f32 phi_f2;
    s32 phi_v0;
    f32 phi_f2_2;
    s32 phi_return;

    temp_v1 = &D_800E6F50[D_8004A7C4->objId];
    temp_f0 = temp_v1->x;
    if (temp_f0 < 0.0f) {
        phi_f2 = -temp_f0;
    } else {
        phi_f2 = temp_f0;
    }
    phi_v0 = 0;
    phi_return = 0;
    if (phi_f2 < arg0) {
        phi_v0 = 1;
        phi_return = 1;
    }
    if (phi_v0 != 0) {
        temp_f0_2 = temp_v1->y;
        if (temp_f0_2 < 0.0f) {
            phi_f2_2 = -temp_f0_2;
        } else {
            phi_f2_2 = temp_f0_2;
        }
        phi_return = 0;
        if (phi_f2_2 < arg1) {
            phi_return = 1;
        }
    }
    return phi_return;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B30BC.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
? func_800B3158(void) {
    u32 temp_v0;

    temp_v0 = D_8004A7C4->objId;
    if (func_800B3234(gEntitiesNextPosXArray[temp_v0], gEntitiesNextPosYArray[temp_v0], gEntitiesNextPosZArray[temp_v0]) != 0) {
        return 0;
    }
    return 1;
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B3158.s")
#endif

#ifdef MIPS_TO_C
//generated by mips_to_c commit 3ec45aadfc2cb619035fb802d88c52eacfab0326
void func_800B31B4(void) {
    s32 sp18;
    s32 temp_a0;
    u32 temp_v0;

    temp_v0 = D_8004A7C4->objId;
    temp_a0 = D_800DE350[temp_v0];
    sp18 = temp_a0;
    if (func_800B3234(gEntitiesNextPosXArray[temp_v0], gEntitiesNextPosYArray[temp_v0], temp_a0, (bitwise s32) gEntitiesNextPosZArray[temp_v0]) != 0) {
        temp_a0->unk48 = 0;
        func_8019B7D8_ovl1(temp_a0);
        func_8019D8A0_ovl1(D_8004A7C4->unk2);
    }
}
#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B31B4.s")
#endif

#ifdef MIPS_TO_C
s32 func_800B3234(f32 arg0, f32 arg1, f32 arg2) {
    f32 sp38;
    f32 sp34;
    f32 sp30;
    s32 sp2C;
    f32 *temp_a1;
    f32 temp_f0;
    f32 temp_f14;
    f32 temp_f2;
    struct Normal *temp_a0_2;
    struct UnkStruct8004A7C4 *temp_v1;
    struct UnkStruct8004A7C4 *temp_v1_2;
    struct UnkStruct8004A7C4 *temp_v1_3;
    u32 temp_a0;

    temp_v1 = D_8004A7C4;
    D_800E6F50[temp_v1->objId].z = 0.0f;
    temp_a0 = temp_v1->objId;
    temp_a1 = &sp30;
    if (gEntitiesNextPosYArray[temp_a0] < D_800D67E8) {
        D_800E6F50[temp_a0].z = 1.0f;
        return 1;
    }
    sp30 = arg0;
    sp34 = arg1;
    sp38 = arg2;
    temp_v1_2 = D_8004A7C4;
    sp2C = func_800A4F48(D_800D799C->unk3C, temp_a1, 1.7f, 2.4f);
    D_800E6F50[temp_v1_2->objId].x = sp30;
    D_800E6F50[temp_v1_2->objId].y = sp34;
    // distance to kirby
    temp_f0 = arg0 - gEntitiesNextPosXArray[0];
    temp_f2 = arg1 - gEntitiesNextPosYArray[0] + 20.0f);
    temp_f14 = arg2 - gEntitiesNextPosZArray[0];
    temp_v1_3 = D_8004A7C4;
    D_800E6F50[temp_v1_3->objId].originOffset = sqrtf((temp_f0 * temp_f0) + (temp_f2 * temp_f2) + (temp_f14 * temp_f14));
    if ((sp2C == 0) && (temp_a0_2 = &D_800E6F50[temp_v1_3->objId], (temp_a0_2->originOffset > 500.0f))) {
        temp_a0_2->z = 1.0f;
        return 1;
    }
    return 0;
}

#else
GLOBAL_ASM("asm/non_matchings/ovl1/ovl1_7/func_800B3234.s")
#endif


extern f32 D_800D67EC;
void func_800B33F4(void) {
    D_800E64D0[D_8004A7C4->objId] = 0.0f;

    D_800E3050[D_8004A7C4->objId] =
    D_800E3210[D_8004A7C4->objId] =
    D_800E33D0[D_8004A7C4->objId] = D_800E64D0[D_8004A7C4->objId];

    D_800E6690[D_8004A7C4->objId] = 0.0f;

    D_800E3590[D_8004A7C4->objId] =
    D_800E3750[D_8004A7C4->objId] =
    D_800E3910[D_8004A7C4->objId] = D_800E6690[D_8004A7C4->objId];

    D_800E6850[D_8004A7C4->objId] = D_800D67EC;

    D_800E3AD0[D_8004A7C4->objId] =
    D_800E3C90[D_8004A7C4->objId] =
    D_800E3E50[D_8004A7C4->objId] = D_800E6850[D_8004A7C4->objId];
}

extern f32 D_800D67F0;
void func_800B3520(void) {
    f32 temp_f0;

    D_800E6690[D_8004A7C4->objId] = 0.0f;
    temp_f0 = D_800E6690[D_8004A7C4->objId];
    D_800E3750[D_8004A7C4->objId] = temp_f0;
    D_800E64D0[D_8004A7C4->objId] = temp_f0;
    D_800E3210[D_8004A7C4->objId] = temp_f0;
    D_800E6850[D_8004A7C4->objId] = D_800D67F0;
    D_800E3C90[D_8004A7C4->objId] = D_800E6850[D_8004A7C4->objId];
}
