name: Kirby 64 (US)
sha1: 6cea2d46b929a3bb347b060a77fccc83526fb855
options:
  basename: kirby
  target_path: baserom.us.z64
  find_file_boundaries: True
  platform: n64
  compiler: ido
  asm_emit_size_directive: True
  asm_path: asm
  src_path: src
  asset_path: assets
  base_path: .
  build_path: build
  o_as_suffix: True
  do_c_func_detection: True
  symbol_addrs_path: tools/symbol_addrs.txt
  extensions_path: tools/splat_ext
  # reloc_addrs_path: reloc_addrs.txt
  ld_script_path: kirby.ld
  asm_inc_header: ""
  use_legacy_include_asm: False
  subalign: 16
  segment_end_before_align: True
segments:
  - [0x0, header]

  - name: boot
    type: bin
    start: 0x0040

  - name: main
    type: code
    start: 0x1000
    end: 0x69EE0
    vram: 0x80000400
    bss_size: 0x589b0
    subsegments:
    - [0x1000, hasm, entry]
    - [0x1060, c, main/code_1060]
    - [0x1500, c, main/code_1500]
    - [0x37A0, c, main/code_37A0]
    - [0x49C0, c, main/code_49C0]
    - [0x5F50, c, main/code_5F50]
    - [0x8430, c, main/code_8430]
    - [0x8800, c, main/code_8800]
    - [0x8B60, c, main/code_8B60]
    - [0xCA90, c, main/code_CA90]
    - [0x11720, c, main/code_11720]
    - [0x198A0, c, main/code_198A0]
    - [0x1A630, c, main/code_1A630]
    - [0x1EFA0, c, main/code_1EFA0]
    - [0x21B40, c, main/code_21B40]
    - [0x23EB0, c, main/code_23EB0]
    - [0x23F00, c, main/code_23F00]
    - [0x23F60, c, main/code_23F60]
    - [0x2B510, c, main/code_2B510]
    - [0x2B670, c, main/code_2B670]
    - [0x2B6E0, c, main/code_2B6E0]
    - [0x2B910, c, main/code_2B910]
    - [0x2B990, c, main/code_2B990]
    - [0x2BB60, c, main/code_2BB60]
    - [0x2D590, c, main/code_2D590]
    - [0x2D5B0, c, main/code_2D5B0]
    - [0x2D960, c, main/code_2D960]
    - [0x2D9A0, c, main/code_2D9A0]
    - [0x2DA20, c, main/code_2DA20]
    - [0x2DB00, c, main/code_2DB00]
    - [0x2DB40, c, main/code_2DB40]
    - [0x2DC70, c, main/code_2DC70]
    - [0x2DCA0, c, main/code_2DCA0]
    - [0x2DD20, c, main/code_2DD20]
    - [0x2DD80, c, main/code_2DD80]
    - [0x2DE50, c, main/code_2DE50]
    - [0x2DEF0, c, main/code_2DEF0]
    - [0x2E040, c, main/code_2E040]
    - [0x2E240, c, main/code_2E240]
    - [0x2E790, c, main/code_2E790]
    - [0x2E8A0, c, main/code_2E8A0]
    - [0x2F470, c, main/code_2F470]
    - [0x2F550, c, main/code_2F550]
    - [0x30410, c, main/code_30410]
    - [0x307E0, c, main/code_307E0]
    - [0x30930, c, main/code_30930]
    - [0x30B10, c, main/code_30B10]
    - [0x30BA0, c, main/code_30BA0]
    - [0x30C20, c, main/code_30C20]
    - [0x30CA0, c, main/code_30CA0]
    - [0x30F30, c, main/code_30F30]
    - [0x30FF0, c, main/code_30FF0]
    - [0x31010, c, main/code_31010]
    - [0x310E0, c, main/code_310E0]
    - [0x31190, c, main/code_31190]
    - [0x311E0, c, main/code_311E0]
    - [0x31710, c, main/code_31710]
    - [0x31980, c, main/code_31980]
    - [0x319F0, c, main/code_319F0]
    - [0x31E70, c, main/code_31E70]
    - [0x32010, c, main/code_32010]
    - [0x320D0, c, main/code_320D0]
    - [0x320E0, c, main/code_320E0]
    - [0x32C60, c, main/code_32C60]
    - [0x32E80, c, main/code_32E80]
    - [0x33140, c, main/code_33140]
    - [0x33720, c, main/code_33720]
    - [0x33730, c, main/code_33730]
    - [0x33800, c, main/code_33800]
    - [0x344C0, c, main/code_344C0]
    - [0x345A0, c, main/code_345A0]
    - [0x34640, c, main/code_34640]
    - [0x346E0, c, main/code_346E0]
    - [0x34710, c, main/code_34710]
    - [0x34790, c, main/code_34790]
    - [0x34840, c, main/code_34840]
    - [0x34930, c, main/code_34930]
    - [0x34960, c, main/code_34960]
    - [0x34990, c, main/code_34990]
    - [0x34BE0, c, main/code_34BE0]
    - [0x34E40, c, main/code_34E40]
    - [0x35070, c, main/code_35070]
    - [0x35210, c, main/code_35210]
    - [0x352A0, c, main/code_352A0]
    - [0x356F0, c, main/code_356F0]
    - [0x358E0, c, main/code_358E0]
    - [0x358F0, c, main/code_358F0]
    - [0x35900, c, main/code_35900]
    - [0x35C10, c, main/code_35C10]
    - [0x35C90, c, main/code_35C90]
    - [0x35CF0, c, main/code_35CF0]
    - [0x35F60, c, main/code_35F60]
    - [0x35FA0, c, main/code_35FA0]
    - [0x360E0, c, main/code_360E0]
    - [0x363E0, c, main/code_363E0]
    - [0x36410, c, main/code_36410]
    - [0x36580, c, main/code_36580]
    - [0x365B0, c, main/code_365B0]
    - [0x36620, c, main/code_36620]
    - [0x36720, c, main/code_36720]
    - [0x368A0, c, main/code_368A0]
    - [0x36920, c, main/code_36920]
    - [0x36D50, c, main/code_36D50]
    - [0x37BD0, c, main/code_37BD0]
    - [0x37C30, c, main/code_37C30]
    - [0x37C80, c, main/code_37C80]
    - [0x37F20, c, main/code_37F20]
    - [0x38150, c, main/code_38150]
    - [0x382C0, c, main/code_382C0]
    - [0x38530, c, main/code_38530]
    - [0x39000, c, main/code_39000]
    - [0x39190, c, main/code_39190]
    - [0x39430, c, main/code_39430]
    - [0x39480, c, main/code_39480]
    - [0x39530, c, main/code_39530]
    - [0x39560, c, main/code_39560]
    - [0x39570, c, main/code_39570]
    - [0x39580, c, main/code_39580]
    - [0x39890, c, main/code_39890]
    - [0x398A0, c, main/code_398A0]
    - [0x398D0, c, main/code_398D0]
    - [0x39A80, c, main/code_39A80]
    - [0x39B30, c, main/code_39B30]
    - [0x39DF0, data, mainseg]
    - [0x40A20, rodata, mainseg]
    - [0x42940, rodata, n_aspMain_data]
    - [0x42BF0, rodata, mainseg.2]
    - [0x43790]
    - {type: bss, vram: 0x80042B90, name: mainseg}

  - name: ovl1
    type: code
    overlay: yes
    start: 0x0043790
    vram: 0x8009B540
    bss_size: 0x1f7e0
    subsegments:
    - [0x43790, pad]
    - [0x437A0, c, ovl1/code_437A0]
    - [0x4AB10, c, ovl1/code_4AB10]
    - [0x4EE10, c, ovl1/code_4EE10]
    - [0x50510, c, ovl1/code_50510]
    - [0x536E0, c, ovl1/code_536E0]
    - [0x538D0, c, ovl1/code_538D0]
    - [0x56340, c, ovl1/code_56340]
    - [0x56F10, c, ovl1/code_56F10]
    - [0x5B840, c, ovl1/code_5B840]
    - [0x60950, c, ovl1/code_60950]
    - [0x629F0, c, ovl1/code_629F0]
    - [0x637D0, c, ovl1/code_637D0]
    - [0x63DF0, c, ovl1/code_63DF0]
    - [0x64230, c, ovl1/code_64230]
    - [0x66630, data, ovl1/ovl1]
    - [0x7ec10]
    - {type: bss, vram: 0x800d69c0, name: ovl1/ovl1}

  - name: ovl2
    type: code
    overlay: yes
    start: 0x07EC10
    vram: 0x800F61A0
    bss_size: 0x5a20
    subsegments:
    - [0x7EC10, c, ovl2/code_7EC10]
    - [0x7F6B0, c, ovl2/code_7F6B0]
    - [0x81310, c, ovl2/code_81310]
    - [0x85DA0, c, ovl2/code_85DA0]
    - [0x864B0, c, ovl2/code_864B0]
    - [0x88050, c, ovl2/code_88050]
    - [0x89E70, c, ovl2/code_89E70]
    - [0x97020, c, ovl2/code_97020]
    - [0x98BC0, c, ovl2/code_98BC0]
    - [0x9A980, c, ovl2/code_9A980]
    - [0xA4480, c, ovl2/code_A4480]
    - [0xAC900, data, ovl2/ovl2]
    - [0xB1150, rodata, ovl2/ovl2]
    - [0x0B1B40]
    - {type: bss, vram: 0x801290d0, name: ovl2/ovl2}
    
  - name: ovl3
    type: code
    symbol_name_format : $VRAM_ovl3
    overlay: yes
    start: 0xB1B40
    vram: 0x80151100
    exclusive_ram_id: players
    bss_size: 0xc80
    subsegments:
    - [0xB1B40, c, ovl3/code_B1B40]
    - [0xB2AB0, c, ovl3/code_B2AB0]
    - [0xB6A90, c, ovl3/code_B6A90]
    - [0xBB6D0, c, ovl3/code_BB6D0]
    - [0xC9E70, c, ovl3/code_C9E70]
    - [0xCC9A0, c, ovl3/code_CC9A0]
    - [0xF0D50, data, ovl3/ovl3]
    - [0xF8630]
    - {type: bss, vram: 0x80197bf0, name: ovl3/ovl3}

  - name: ovl4
    folder: ovl4
    symbol_name_format : $VRAM_ovl4
    type: code
    overlay: yes
    start: 0x0F8630
    vram: 0x80151100
    exclusive_ram_id: players
    bss_size: 0xb0
    subsegments:
    - [0xF8630, c, ovl4/code_F8630]
    - [0xF9310, c, ovl4/code_F9310]
    - [0xFF650, c, ovl4/code_FF650]
    - [0x1014F0, data, ovl4/ovl4]
    - [0x103BB0]
    - {type: bss, vram: 0x8015c680, name: ovl4/ovl4}
    
  - name: ovl5
    type: code
    symbol_name_format : $VRAM_ovl5
    overlay: yes
    start: 0x103BB0
    vram: 0x8015C740
    exclusive_ram_id: self_contained
    bss_size: 0xe40
    subsegments:
    - [0x103BB0, c, ovl5/code_103BB0]
    - [0x104170, c, ovl5/code_104170]
    - [0x10C8B0, c, ovl5/code_10C8B0]
    - [0x116FF0, c, ovl5/code_116FF0]
    - [0x11EF70, c, ovl5/code_11EF70]
    - [0x121270, c, ovl5/code_121270]
    - [0x1261D0, c, ovl5/code_1261D0]
    - [0x126AD0, c, ovl5/code_126AD0]
    - [0x1277D0, c, ovl5/code_1277D0]
    - [0x1297D0, c, ovl5/code_1297D0]
    - [0x12A510, c, ovl5/code_12A510]
    - [0x12D410, data, ovl5/ovl5]
    - [0x135490]
    - {type: bss, vram: 0x8018e020, name: ovl5/ovl5}
    
  - name: ovl6
    type: code
    symbol_name_format : $VRAM_ovl6
    overlay: yes
    start: 0x135490
    vram: 0x80151100
    exclusive_ram_id: players
    bss_size: 0x270
    subsegments:
    - [0x135490, c]
    - [0x139150, data, ovl6/ovl6]
    - [0x13E8F0]
    - {type: bss, vram: 0x8015A560, name: ovl6/ovl6}
    
  - name: ovl7
    type: code
    symbol_name_format : $VRAM_ovl7
    overlay: yes
    start: 0x13E8F0
    vram: 0x80198880
    exclusive_ram_id: ovl7
    bss_size: 0x2590
    subalign: 4
    subsegments:
    - [0x13E8F0, c, ovl7/code_13E8F0]
    - [0x145420, c, ovl7/code_145420]
    - [0x146DC0, c, ovl7/code_146DC0]
    - [0x149EF0, c, ovl7/code_149EF0]
    - [0x14D070, c, ovl7/code_14D070]
    - [0x153040, c, ovl7/code_153040]
    - [0x154A90, c, ovl7/code_154A90]
    - [0x1565C0, c, ovl7/code_1565C0]
    - [0x157ED0, c, ovl7/code_157ED0]
    - [0x1596E0, c, ovl7/code_1596E0]
    - [0x15ADC0, c, ovl7/code_15ADC0]
    - [0x15DA20, c, ovl7/code_15DA20]
    - [0x15EF90, c, ovl7/code_15EF90]
    - [0x161A40, c, ovl7/code_161A40]
    - [0x161EC0, c, ovl7/code_161EC0]
    - [0x163580, c, ovl7/code_163580]
    - [0x165290, c, ovl7/code_165290]
    - [0x168840, data, ovl7/ovl7]
    - [0x174740]
    - {type: bss, vram: 0x801CE6D0, name: ovl7/ovl7}

  # ovl8 and ovl9 share ram
  - name: ovl8
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl8
    start: 0x174740
    vram: 0x801D0C60
    exclusive_ram_id: self_contained
    bss_size: 0x10
    subsegments:
    - [0x174740, c, ovl8/code_174740]
    - [0x175B20, c, ovl8/eneeff]
    - [0x176670, c, ovl8/code_176670]
    - [0x178090, c, ovl8/code_178090]
    - [0x17B360, data, ovl8/ovl8]
    - [0x17ECB0]
    - {type: bss, vram: 0x801DB1D0, name: ovl8/ovl8}

  - name: ovl9
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl9
    start: 0x17ECB0
    vram: 0x801D0C60
    exclusive_ram_id: self_contained
    bss_size: 0x10
    subsegments:
    - [0x17ECB0, c, ovl9/code_17ECB0]
    - [0x186E10, c, ovl9/code_186E10]
    - [0x18A910, c, ovl9/code_18A910]
    - [0x18EAF0, c, ovl9/code_18EAF0]
    - [0x193770, c, ovl9/code_193770]
    - [0x198C10, c, ovl9/code_198C10]
    - [0x19E0B0, c, ovl9/code_19E0B0]
    - [0x1A6780, c, ovl9/code_1A6780]
    - [0x1A9AF0, c, ovl9/code_1A9AF0]
    - [0x1AFE30, c, ovl9/code_1AFE30]
    - [0x1B5310, c, ovl9/code_1B5310]
    - [0x1B7080, c, ovl9/code_1B7080]
    - [0x1B7770, c, ovl9/code_1B7770]
    - [0x1BDFD0, c, ovl9/code_1BDFD0]
    - [0x1C2F10, c, ovl9/code_1C2F10]
    - [0x1C6810, c, ovl9/code_1C6810]
    - [0x1C7A30, c, ovl9/code_1C7A30]
    - [0x1C81F0, c, ovl9/code_1C81F0]
    - [0x1C9B00, data, ovl9/ovl9]
    - [0x1CBF50]
    - {type: bss, vram: 0x8021DF00, name: ovl9/ovl9}

  # ovl10 - ovl17 share ram
  - name: ovl10
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl10
    start: 0x1CBF50
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x80
    subsegments:
    - [0x1CBF50, c, ovl10/code_1CBF50]
    - [0x1CC970, c, ovl10/code_1CC970]
    - [0x1E0160, c, ovl10/code_1E0160]
    - [0x1E0500, c, ovl10/code_1E0500]
    - [0x1E4160, data, ovl10/ovl10]
    - [0x1E5AA0]
    - {type: bss, vram: 0x801f4d30, name: ovl10/ovl10}

  - name: ovl11
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl11
    start: 0x1E5AA0
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x30
    subsegments:
    - [0x1E5AA0, c, ovl11/code_1E5AA0]
    - [0x1EB3C0, data, ovl11/ovl11]
    - [0x1EB520]
    - {type: bss, vram: 0x801E0C60, name: ovl11/ovl11}

  - name: ovl12
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl12
    start: 0x1EB520
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x10
    subsegments:
    - [0x1EB520, c, ovl12/code_1EB520]
    - [0x1F18D0, c, ovl12/code_1F18D0]
    - [0x1F2DE0, data, ovl12/ovl12]
    - [0x1F3160]
    - {type: bss, vram: 0x801e2e20, name: ovl12/ovl12}

  - name: ovl13
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl13
    start: 0x1F3160
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x10
    subsegments:
    - [0x1F3160, c, ovl13/code_1F3160]
    - [0x1FBD40, c, ovl13/code_1FBD40]
    - [0x1FC420, c, ovl13/code_1FC420]
    - [0x1FDA00, data, ovl13/ovl13]
    - [0x1FDDD0]
    - {type: bss, vram: 0x801e5e50, name: ovl13/ovl13}

  - name: ovl14
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl14
    start: 0x1FDDD0
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x10
    subsegments:
    - [0x1FDDD0, c, ovl14/code_1FDDD0]
    - [0x202980, c, ovl14/code_202980]
    - [0x205A90, data, ovl14/ovl14]
    - [0x205d40]
    - {type: bss, vram: 0x801e3150, name: ovl14/ovl14}

  - name: ovl15
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl15
    start: 0x205D40
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x10
    subsegments:
    - [0x205D40, c, ovl15/code_205D40]
    - [0x210970, c, ovl15/code_210970]
    - [0x210FB0, data, ovl15/ovl15]
    - [0x211490]
    - {type: bss, vram: 0x801E6930, name: ovl15/ovl15}

  - name: ovl16
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl16
    start: 0x211490
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x110
    subsegments:
    - [0x211490, c, ovl16/code_211490]
    - [0x225770, data, ovl16/ovl16]
    - [0x2263D0]
    - {type: bss, vram: 0x801F0120, name: ovl16/ovl16}

  - name: ovl17
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl17
    start: 0x2263D0
    vram: 0x801DB1E0
    exclusive_ram_id: self_contained
    bss_size: 0x70
    subsegments:
    - [0x2263D0, c, ovl17/code_2263D0]
    - [0x228AE0, c, ovl17/code_228AE0]
    - [0x22BEF0, c, ovl17/code_22BEF0]
    - [0x230050, data, ovl17/ovl17]
    - [0x2308C0]
    - {type: bss, vram: 0x801e56d0, name: ovl17/ovl17}

  # ovl18 and ovl19 share ram
  - name: ovl18
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl18
    start: 0x2308C0
    vram: 0x8021DF20
    exclusive_ram_id: ovl_18_19
    bss_size: 0xB0
    subsegments:
    - [0x2308C0, c, ovl18/code_2308C0]
    - [0x232B60, c, ovl18/code_232B60]
    - [0x234830, c, ovl18/code_234830]
    - [0x234BC0, c, ovl18/code_234BC0]
    - [0x236CC0, c, ovl18/code_236CC0]
    - [0x236F20, c, ovl18/code_236F20]
    - [0x2385A0, c, ovl18/code_2385A0]
    - [0x239080, c, ovl18/code_239080]
    - [0x239D80, data, ovl18/ovl18]
    - [0x23E630]
    - {type: bss, vram: 0x8022bc90, name: ovl18/ovl18}

  - name: ovl19
    type: code
    overlay: yes
    symbol_name_format : $VRAM_ovl19
    start: 0x23E630
    vram: 0x8021DF20
    exclusive_ram_id: ovl_18_19
    bss_size: 0xa0
    subsegments:
    - [0x23E630, c, ovl19/code_23E630]
    - [0x23F610, c, ovl19/code_23F610]
    - [0x249810, c, ovl19/code_249810]
    - [0x24ED40, c, ovl19/code_24ED40]
    - [0x24F750, data, ovl19/ovl19]
    - [0x2501C0]
    - {type: bss, vram: 0x8022fab0, name: ovl19/ovl19}

  - name: ovl20
    type: code
    folder: ovl20
    overlay: yes
    start: 0x2501C0
    vram: 0x80300000
    exclusive_ram_id: ovl20
    bss_size: 0xd0
    subsegments:
    - [0x2501C0, c, tamper_check_ovl20]
    - [0x2502A0, data, tamper_check_ovl20]
    - [0x250320]
    - {type: .bss, vram: 0x80300160, name: tamper_check_ovl20}

  - [0x250320, bin, sound/sound_250320]
  - [0x2A8CB0, bin, sound/ctl_2A8CB0]
  - [0x2B1510, bin, sound/sound_2B1510]
  - [0x3E1400, bin, sound/ctl_3E1400]
  - [0x3E6BC0, bin, sound/sound_3E6BC0]
  - [0x49F590, bin, sound/sound_49F590]
  - [0x4A0340, bin, sound/sound_4A0340]
  - [0x4A3B60, bin, sound/sound_4A3B60]
  - [0x4aa8f0, bin, game_assets] # using a custom build system for this, no questions asked
  - [0x1e8bb50, bin, pad]
  - [0x2000000]
